/*! mvc-framework 2014-04-24 */
function Model(){var a=new Controller(this);this.controller=a}function View(){}function Controller(a,b){this.model=a,this.view=b}function initializeValue(a,b,c){var d=c.model.getData();b=getArrOfBindingProperties(b);for(var e=b.length,f=0;e>f;f++){var g=b[f].objectProperty;if(d.hasOwnProperty(g)){var h=d[g]();"text"==b[f].nodeProperty?a.textContent=h:a.setAttribute(b[f].nodeProperty,h),addViewListeners(a,d,b[f].objectProperty)}else d[g]=createObservable(null,c)}}function addViewListeners(a,b,c){var d=a.nodeName.toLowerCase();("input"==d||"select"==d||"textarea"==d)&&addEventListener(a,"input",onInputHandler(b,c))}function onInputHandler(a,b){return function(c){a[b](getSrcElement(c).value)}}function initializeObservablesForDataObject(a){dataObject=a.model.getData(),dataObject&&mapObjectByFields(dataObject,a)}function mapObjectByFields(a,b){for(var c in a)a.hasOwnProperty(c)&&("Object"==typeof a[c]||(a[c]=createObservable(a[c],b)))}function createObservable(a,b){return function(c){return"undefined"!=typeof c&&(a=c,b.reBindDataToView()),a}}function initializeDocument(){document.documentElement;nodeList=getNodeList(document.documentElement,".//@*[starts-with(name(.),'mvc')]/..")}function getNodeList(a,b){for(var c=document.evaluate(b,a,null,XPathResult.ANY_TYPE,null),d=c.iterateNext(),e=[];d;)e[e.length]=d,d=c.iterateNext();return e}function addEventListener(a,b,c){window.document.addEventListener?a.addEventListener(b,c,!1):a.attachEvent("on"+b,c)}function getSrcElement(a){return a.srcElement||a.target}function getArrOfBindingProperties(a){for(var b=a.split(","),c=new Array(b.length),d=0;d<b.length;d++){c[d]={};var e=b[d].split(":");c[d].nodeProperty=e[0].trim(),c[d].objectProperty=e[1].trim()}return c}Model.prototype.getData=function(){return this.data},Model.prototype.initializeModel=function(a){this.data=a,this.controller.initializeView(a)},Model.prototype.setData=function(){},Controller.prototype.initializeView=function(){initializeObservablesForDataObject(this),this.reBindDataToView()},Controller.prototype.reBindDataToView=function(){for(var a=0;a<nodeList.length;a++){currentNode=nodeList[a];for(var b=getNodeList(currentNode,".//@*[starts-with(name(.),'mvc')]"),c=0;c<b.length;c++){var d=b[0].nodeName,e=b[0].nodeValue;"mvc-bind"==d&&e&&initializeValue(currentNode,e,this)}}},addEventListener(window.document,"DOMContentLoaded",initializeDocument);var nodeList;model=new Model;